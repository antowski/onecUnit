
Перем мПроверить;
Перем мРезультат;

Перем мКолПровалено;
Перем мКолЗапущено;
Перем мКолУспешно;

Процедура Конструктор()
	
	мПроверить = СоздатьОбъект("Утверждения");
	мРезультат = СоздатьОбъект("РезультатТеста");
	
	мКолЗапущено = 0;
	мКолПровалено = 0;
	мКолУспешно = 0;
	
	мРезультат.ДобавитьПодписчика(Я());
	
КонецПроцедуры // Конструктор

Процедура ПриЗапуске(пТест) Экспорт
	мКолЗапущено = мКолЗапущено + 1;
КонецПроцедуры

Процедура ПриУспешномЗавершении(пТест) Экспорт
	мКолУспешно = мКолУспешно + 1;
КонецПроцедуры

Процедура ПриПровале(пТест) Экспорт
	мКолПровалено = мКолПровалено + 1;
КонецПроцедуры

Процедура тестРегистрацияПровала() Экспорт
	
	Тест = СоздатьОбъект("Фикстура.БылВыполнен");
	Тест.Инит("СломанныйТест");
	
	Тест.Выполнить(мРезультат);
	
	мПроверить.Равно(1,мКолПровалено);	
	
КонецПроцедуры // тестРегистрацияПровала

Процедура тестРегистрацияЗапускаИУспешногоЗавершения() Экспорт
	
	Тест = СоздатьОбъект("Фикстура.БылВыполнен");
	Тест.Инит("ТестовыйМетод");
	
	Тест.Выполнить(мРезультат);
	
	мПроверить.Равно(1,мКолЗапущено);
	мПроверить.Равно(1,мКолУспешно);
	
КонецПроцедуры // тестРегистрацияПровала
