
Перем мТест;
Перем мРезультат;
Перем мПроверить;

Процедура Конструктор()
	мПроверить = СоздатьОбъект("Утверждения");
КонецПроцедуры // Конструктор

Процедура ПередВыполнением() Экспорт
	мРезультат = СоздатьОбъект("РезультатТеста");
	мТест = СоздатьОбъект("Фикстура.БылВыполнен");
	мТест.Инит("ТестовыйМетод");
КонецПроцедуры // ПередВыполнением

Процедура тестНаборТестов() Экспорт
	НаборТестов = СоздатьОбъект("НаборТестов");
	НаборТестов.Добавить( НаборТестов.СоздатьТест("Фикстура.БылВыполнен", "ТестовыйМетод") );
	НаборТестов.Добавить( НаборТестов.СоздатьТест("Фикстура.БылВыполнен", "СломанныйТест") );
	НаборТестов.Выполнить(мРезультат);	
	я().Проверить.Равно("запущено: 2; провалено: 1", мРезультат.Сводка());
КонецПроцедуры // тестНаборТестов

Процедура тестОшибкаСозданияТеста_ЕслиКлассаТестаНеСуществует() Экспорт
	
	ИмяНесуществующегоКласса = "ИмяНесуществующегоКласса";
	ОжидаемаяОшибка = "Не обнаружен класс '" + ИмяНесуществующегоКласса + "'";
	
	ИсключениеВыброшено = 0;
	
	НаборТестов = СоздатьОбъект("НаборТестов");
	
	Попытка
		НаборТестов.СоздатьТест(ИмяНесуществующегоКласса, "НесуществующийМетод");
	Исключение
		ИсключениеВыброшено = 1;
		мПроверить.НеРавно(0, Найти(ОписаниеОшибки(), ОжидаемаяОшибка));
	КонецПопытки;
	
	мПроверить.Равно(1, ИсключениеВыброшено);
	
КонецПроцедуры // тестОшибкаСозданияТеста_ЕслиКлассаТестаНеСуществует

Процедура тестОшибкаСозданияТеста_ЕслиТестовогоМетодаНеСуществует()
	
КонецПроцедуры // тестОшибкаСозданияТеста_ЕслиТестовогоМетодаНеСуществует
